<!DOCTYPE html>

 <html lang="ko">
<head>
    <title>Diablo2</title> 
<meta charset="utf-8" />
<meta name="application-name" content="coreflex"/>
<meta name="viewport" content="width=device-width, initial-scale=1 , viewport-fit=cover">
<meta name="description" content="Diablo2 Profile">
<meta name="robots" content="index, follow">
<meta name="keywords" content="Diablo2 Profile" />

<meta property="og:type" content="website">
<meta property="og:description" content="Diablo2 Profile">
<meta property="og:site_name" content="Diablo2 Profile">
<meta property="og:url" content="https://dayyoung.github.io/diabloapp/d2/">
<meta property="og:title" content="Diablo2 Profile">
<meta property="og:image" content="https://dayyoung.github.io/diabloapp/d2/previewlogo.jpg">
<meta property="og:locale" content="ko_KR">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<!-- Chrome, Firefox OS, Opera -->
<meta name="theme-color" content="#484848">
<meta HTTP-EQUIV="Pragma" CONTENT="no-cache">
<meta HTTP-EQUIV="Expires" CONTENT="-1">
<meta http-equiv="refresh" content="-1">

<link rel="apple-touch-icon-precomposed" href="/apple-icon-152x152.png">
<link rel="apple-touch-startup-image" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="shortcut icon" href="/favicon.png">
<link rel="stylesheet" href="/assets/css/main.css">

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css"/>

<!-- <script src="/assets/js/skel.min.js"></script>
<script src="/assets/js/util.js"></script>
<script src="/assets/js/main.js"></script>
 -->
<style>
html, body {
  margin: 0;
  padding: 0;
}
body {
  background-color: #484848; 
  //background-color: white; 
}

.originalText{
font-size: 0px;

}

#captionLayout {
  background-color:transparent !important; 
  cursor : pointer;
}

.originalButton { 
  background-color:transparent !important; 
  cursor : pointer;
}


#myImg{
		height: 100%;
		width: 100%;
}


 /* 메인 컨테이너에 다음과 같이 설정 */
#mainLayout {
  padding:
    env(safe-area-inset-top)
    env(safe-area-inset-right)
    env(safe-area-inset-bottom)
    env(safe-area-inset-left);
}

#videoPlayer { width: 100%;}

/* Tooltip container */
.tooltip {
  position: relative;
  display: inline-block;
  //border-bottom: 1px dotted black; /* If you want dots under the hoverable text */
}

/* Tooltip text */
.tooltip .tooltiptext {
  visibility: hidden;
  word-wrap: break-word;
  //width: 120px;
  background-color: black;
  color: #fff;
  text-align: center;
  padding: 15px;
  border-radius: 6px;
 
  /* Position the tooltip text - see examples below! */
  position: absolute;
  z-index: 1;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}


</style>
   
    <!-- Google Tag Manager (crflx.com)-->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KDSKS7D');</script>
    <!-- End Google Tag Manager -->


<script type="text/javascript">
	
var size = {
  width: window.innerWidth || document.body.clientWidth,
  height: window.innerHeight || document.body.clientHeight 
};

//console.log(size)

</script>


</head>
<body>

<div id="mainLayout">

<img onload="onResume()" id="myImg" src="" height="100%" width="100%" class="fixed" style="max-width: 1800px; 
  display: block; margin-left: auto; margin-right: auto; z-index: 1000; ">

<div id="captionLayout" class="tooltip" style="display: block;  width: 100px;height: 100px;  position:absolute;background-color:greenyellow;opacity:0.7;z-index: 99999;top: 0; margin-left: 10; margin-top: 10;" >

        <span class="tooltiptext" onclick="addNewLayout()">!!</span>
        <h class="captionText" style="width: 100px;height: 100px; text-align: center;"></h><br>
</div> 

<script>

// url 에서 parameter 추출

function getParam(sname) {

    var params = location.search.substr(location.search.indexOf("?") + 1);

    var sval = "";

    params = params.split("&");

    for (var i = 0; i < params.length; i++) {

        temp = params[i].split("=");

        if ([temp[0]] == sname) { sval = temp[1]; }

    }

    return sval;

}

$(window).resize(function() { 
  //console.log("Change.")
  isFirst = true
  onCreate()
 });


//setInterval(function(){onCreate()},1000);

var isFirst = true

function onResume() {
  if(isFirst){
    isFirst = false
    setTimeout(function(){
      onCreate()
    },10);
  }
}

function onCreate() {

//$(".captionLayout").resizable()

//$(".captionLayout").draggable()

   $( "#captionLayout" ).draggable({
      start: function() {
        
      },
      drag: function() {
        

        var obj = $(this)
        var width = obj.width();
        var height = obj.height();
        var offset = $(this).offset();
        var xPos = offset.left;
        var yPos = offset.top;

        $(this).find(".captionText").html("size : " + width + " / " + height + "<br>" + "position : " + xPos + " / " + yPos)
        var sample = {'id':'','w':width,'h':height,'x':xPos,'y':yPos,'caption':''}
        console.log(JSON.stringify(sample))

      },
      stop: function() {
      }
    });

   $( "#captionLayout" ).resizable({
      start: function() {
        
      },
      resize: function() {
        

        var obj = $(this)
        var width = obj.width();
        var height = obj.height();
        var offset = $(this).offset();
        var xPos = offset.left;
        var yPos = offset.top;

        $(this).find(".captionText").html("size : " + width + " / " + height + "<br>" + "position : " + xPos + " / " + yPos)
        var sample = {'id':'','w':width,'h':height,'x':xPos,'y':yPos,'caption':''}
        console.log(JSON.stringify(sample))

      },
      stop: function() {
      }
    });
}

var size = {
  width: document.body.innerWidth || document.body.clientWidth, // for except scroll
  //width: window.innerWidth || document.body.clientWidth,
  height: window.innerHeight || document.body.clientHeight 
};

var myImg = document.getElementById("myImg");
var pageWidth  = myImg.width;
var pageHeight = myImg.height;


  if(size.width<size.height){
    //myImg.css("width","750px";

  $(myImg).css("width" , pageWidth*2);  
  //$(myImg).css("margin-left" , -pageWidth);  
  }


var marginWidth = (size.width - pageWidth ) / 2

var marginHeight = pageHeight - size.height

// 1200 / 4530
//4530 - 891 = 3640

  var mode = getParam('mode')

  console.log(pageWidth)
  console.log(pageHeight)
   

  //For Prevent Copy!
  $("#popupLayout").css("width" , "100%");    
  $("#popupLayout").css("height" , pageHeight); 

  //For Background.
  $("#myLayout").css("background-color" , "#F6F6F6"); 
  //$("#myLayout").css("background-image" , "url(index.jpg)"); 
  $("#myLayout").css("background-size" , "100% 100%"); 
  $("#myLayout").css("width" , "100%"); 
  $("#myLayout").css("height" , pageHeight); 
  $("#myLayout").show()



  //$("#myImg").css("width" , pageWidth); 
  //$("#myImg").css("height" , pageWidth * 0.5); 


  if(mode){
    if (mode == "wide"){
      $("#myImg").attr("src","./0.png")
    }
    else if (mode == "desktop"){
      $("#myImg").attr("src","./0.png")
    }else if (mode == "tablet"){
      $("#myImg").attr("src","./0.png")
    }else{
      $("#myImg").attr("src","./0.png")
    }
  }else{
    if (size.width > 1920){
      $("#myImg").attr("src","./0.png")
    }else if (size.width >= 912 && size.width <= 1920){
      $("#myImg").attr("src","./0.png")
    }else if (size.width >= 768 && size.width <= 912){
      $("#myImg").attr("src","./0.png")
    }else{
      $("#myImg").attr("src","./0.png")
    } 
  }


var itemList = [{"id":1,"w":108,"h":206,"x":875,"y":178,"caption":""},{"id":2,"w":107,"h":104,"x":869,"y":412,"caption":""},{"id":3,"w":61,"h":64,"x":992,"y":408,"caption":""},{"id":4,"w":102,"h":100,"x":1073,"y":110,"caption":""},{"id":5,"w":101,"h":147,"x":1076,"y":234,"caption":""},{"id":6,"w":109,"h":52,"x":1070,"y":411,"caption":""},{"id":7,"w":56,"h":52,"x":1195,"y":159,"caption":""},{"id":8,"w":56,"h":52,"x":1195,"y":410,"caption":""},{"id":9,"w":100,"h":194,"x":1286,"y":185,"caption":""},{"id":10,"w":103,"h":102,"x":1278,"y":412,"caption":""}];

//var itemList = [{"id":1,"w":100,"h":100,"x":140,"y":55,"caption":""},{"id":2,"w":100,"h":100,"x":287,"y":126,"caption":""},{"id":3,"w":100,"h":100,"x":571,"y":183,"caption":""}];

// {"id":"31","w":658,"h":82,"x":40,"y":4140,"caption":"Medallia 고객 경험 관리 솔루션에 대해 더 알고 싶으신가요? 한국 공식 파트너사 (주)코어플렉스에 상담을 요청해보세요."},

//cationpList = $(cationpList)

var size = {
  width: document.body.innerWidth || document.body.clientWidth, // for except scroll
  //width: window.innerWidth || document.body.clientWidth,
  height: window.innerHeight || document.body.clientHeight 
};

var myImg = document.getElementById("myImg");
var pageWidth  = myImg.width;
var pageHeight = myImg.height;


var marginWidth = (size.width - pageWidth ) / 2

var marginHeight = pageHeight - size.height


  // if(size.width<size.height){
  //   weightRate = weightRate * 2
  // }


var weightRate = pageWidth / 1680



//weightRate = 1

$(function(){
  // 실행할 기능을 정의해주세요.


    for(i in itemList)
    {
      var captionItem = itemList[i]

      if($('.caption'+i).length == 0){
        var copyCaption = $( "#captionLayout" ).clone();
        copyCaption.addClass('caption'+i)
        $("#mainLayout").append(copyCaption)
      }else{
        var copyCaption = $('.caption'+i)
      }
      copyCaption.attr('caption', captionItem.id);

      copyCaption.css("width", captionItem.w * weightRate);
      copyCaption.css("height", captionItem.h * weightRate);
      copyCaption.css("left", captionItem.x * weightRate);
      copyCaption.css("margin-top", captionItem.y * weightRate);

      copyCaption.find(".tooltiptext").html(captionItem.caption)
      copyCaption.draggable({ disabled: true });  
      copyCaption.resizable({ disabled: true });  
      copyCaption.show()


        copyCaption.hover(function(){
       
            var index = $(this).attr('caption')

            $("#myImg").attr("src","./"+index+".png")

        }, function() {
            $("#myImg").attr("src","./0.png")
        });

    }

});

  function addNewLayout(){
      //var captionItem = cationpList[i]

      //if($('.caption'+i).length == 0){
        var copyCaption = $("#captionLayout").clone();
        //copyCaption.hide()

        copyCaption.css("z-index",100)
        copyCaption.attr('caption', (itemList.length+1))


        copyCaption.hover(function(){
            console.log(JSON.stringify(itemList))

            //console.log(cationpList.serialize())
//serialize()
            var index = copyCaption.attr('caption')

            $("#myImg").attr("src","./"+index+".png")

        }, function() {
            //console.log(cationpList)
        });

        $("#mainLayout").append(copyCaption)

        //cationpList.push(copyCaption)

        var obj = copyCaption
        var width = obj.width();
        var height = obj.height();
        var offset = copyCaption.offset();
        var xPos = offset.left;
        var yPos = offset.top;

        captionItem = {};
        captionItem.id = itemList.length+1;
        captionItem.w = width;
        captionItem.h = height;
        captionItem.x = xPos;
        captionItem.y = yPos;
        captionItem.caption = ''; 

        itemList.push(captionItem)

      //}else{
        //var copyCaption = $('.caption'+i)
      //}


      // copyCaption.css("width", captionItem.w * weightRate);
      // copyCaption.css("height", captionItem.h * weightRate);
      // copyCaption.css("left", captionItem.x * weightRate + marginWidth);
      // copyCaption.css("margin-top", captionItem.y * weightRate);

      // copyCaption.find(".tooltiptext").html(captionItem.caption)
      // copyCaption.draggable({ disabled: true });  
      // copyCaption.resizable({ disabled: true });  
      // copyCaption.show()  
    }
</script>

      </img>
</div>
</body>
</html>