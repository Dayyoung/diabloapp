<html>
  <head>
    <title>Sandbox Test</title>
    <meta charset="UTF-8" />
    <style>
      iframe {
        display: block;
        border: none;
        height: 100vh;
        width: 100vw;
      }

      body{
        margin: 0;
        padding: 0;
      }

    </style>
  </head>

  <body>
    <!-- <iframe
      src="https://docs.google.com/presentation/d/e/2PACX-1vQtatC0SnnOUvqKU95stLI0NrgAq0WwHlZNbqYKdROg8xIacB1RU1IAhZ_oOuKktwb04rTxY2JWIN7h/embed?start=true&loop=true&delayms=3000"
      frameborder="0"
      width="960"
      height="569"
      allowfullscreen="true"
      mozallowfullscreen="true"
      webkitallowfullscreen="true"
    ></iframe> -->

    <!-- <iframe src="https://www.youtube.com/embed/Ek_CMWVd_0I?si=U6uvh1Nyd2nCsjk2&autoplay=1&mute=1&controls=1&loop=1&playlist=4kh1FHjKii8" id="player" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> -->

    <div id="player"></div>

    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous">
    </script>
    <script>

const tag = document.createElement('script')
tag.src = 'https://www.youtube.com/iframe_api'
const firstScriptTag = document.getElementsByTagName('script')[0]
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)

let player;

const onApiChange = _ => {   
  if (typeof player.setOption === 'function') {
    player.setOption('captions', 'track', {languageCode: 'ko'})
  }  
}

const onReady = _ => {   
  player.playVideo()
}

function onYouTubePlayerAPIReady() {
  player = new YT.Player('player', {
    height: '360',
    width: '640',
    //videoId: '4kh1FHjKii8',
    playerVars: {
      cc_lang_pref: 'ko',
      cc_load_policy: 1,
      autoplay : 1,
      mute : 1,
      listType : 'playList',
      list : 'PLuvOuATgTn16DHQbVz48526ZOIEde1d9e'
    },
    events: {
      onReady,
      onApiChange,
      'onStateChange': onPlayerStateChange,
      'onError': onPlayerError
    }
  })
}

function onPlayerStateChange(event) {

    console.log(event.data)

    if(event.data == 0){

      window.location.reload()
    }
}

function onPlayerError(e){
  window.location.reload()
}


    setInterval(function() {
      if (!navigator.onLine){
          location.href = "file:///Users/mogi/diabloapp/localhost.html";
      }
    }, 1000);


    </script>
  </body>
</html>
